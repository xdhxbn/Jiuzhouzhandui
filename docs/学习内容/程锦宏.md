---

### **嵌入式系统基础学习报告**

---

#### **一、 主要学习内容（知识体系）**

本阶段的学习主要围绕以下几个方面展开：

**1. 嵌入式系统概述**
   - **核心概念**：理解了嵌入式系统是“专用于特定应用的计算机系统”，其特点包括专用性、实时性、可靠性、功耗敏感以及资源受限（CPU主频、内存、存储空间等）。
   - **系统组成**：掌握了嵌入式系统由**硬件层**（处理器、存储器、I/O设备）和**软件层**（操作系统、应用程序）共同构成。
   - **应用领域**：认识到嵌入式系统广泛应用于智能家居、工业控制、汽车电子、医疗设备、消费电子等各个领域。

**2. 嵌入式硬件核心**
   - **微控制器（MCU）**：作为学习重点，深入理解了MCU的结构。其将CPU、RAM、ROM（Flash）、定时器、中断控制器及多种I/O接口（如GPIO, UART, I2C, SPI, ADC/DAC）集成在单一芯片上。
     - **CPU架构**：重点学习了**ARM Cortex-M系列**（如M3, M4）内核，了解了其寄存器组、操作模式（线程模式、处理模式）和指令集（Thumb-2）的特点。
     - **存储器结构**：理解了Flash（存储程序代码、常量）、RAM（存储变量、堆栈）、以及各类外设寄存器的映射关系（内存映射I/O）。
   - **通用输入输出（GPIO）**：掌握了GPIO的基本工作原理，包括：
     - **引脚模式配置**：推挽输出、开漏输出、上拉/下拉输入、浮空输入等。
     - **读写操作**：学习如何通过设置/清除寄存器来控制引脚电平，以及读取输入引脚的状态。这是控制LED、按键等最基本外设的基础。
   - **时钟系统**：理解了时钟是MCU的“脉搏”，学习了内部RC振荡器（HSI）与外部晶体振荡器（HSE）的区别，以及如何通过PLL倍频得到更高的系统时钟（SYSCLK）。

**3. 嵌入式软件基础**
   - **交叉开发环境**：建立了**宿主机（PC）** 与**目标板（开发板）** 的开发模型。学会了在PC上编写、编译代码，然后通过调试器烧录到目标板运行。
   - **编程语言**：以**C语言**为核心，重点复习和巩固了：
     - 位运算（与、或、非、异或、移位），用于精确操控寄存器特定位。
     - 指针与内存地址的直接操作，特别是函数指针的应用。
     - `volatile`关键字，防止编译器优化对硬件寄存器操作的代码。
     - 结构体与宏定义，用于高效地组织和管理寄存器映射。
   - **启动流程**：学习了从芯片上电到执行`main()`函数的过程：
     1. 从固定地址获取栈指针初始值（MSP）。
     2. 从复位向量地址获取程序计数器（PC）初始值，即复位处理函数。
     3. 执行系统初始化代码（如`SystemInit`），配置时钟。
     4. 调用C库的`__main`，初始化数据段（Data）、清零BSS段，最后跳转到用户的`main()`函数。
   - **固件库与HAL库**：学习了使用芯片厂商提供的标准库（如STM32的HAL库或标准外设库）进行开发，通过调用API函数来配置和使用外设，提高了开发效率和代码可移植性。

**4. 核心外设与通信协议**
   - **中断系统**：理解了中断是处理异步事件的关键机制。
     - **NVIC（嵌套向量中断控制器）**：学习了如何配置中断优先级（抢占优先级和子优先级）和使能中断。
     - **外部中断（EXTI）**：学习了如何配置GPIO引脚使其能够触发中断。
   - **定时器（TIM）**：学习了基本定时器、通用定时器和高级定时器的功能，掌握了：
     - 定时计数原理（计数器、预分频器、自动重载寄存器）。
     - 实现精确延时、产生PWM波形（控制舵机、电机）等方法。
   - **串行通信协议**：
     - **UART（通用异步收发传输器）**：掌握了其异步、全双工、点对点的特点，理解了波特率、数据位、停止位、奇偶校验位等概念。学会了通过轮询和中断方式接收/发送数据。
     - **I2C（Inter-Integrated Circuit）**：理解了其基于时钟线（SCL）和数据线（SDA）的半双工、多主多从的通信方式。掌握了起始信号、停止信号、应答信号（ACK/NACK）的时序，以及通过设备地址进行寻址的机制。
     - **SPI（串行外设接口）**：理解了其基于时钟线（SCLK）、主出从入（MOSI）、主入从出（MISO）和片选（CS）的全双工、同步通信方式。掌握了其高速通信的特点。

**5. 嵌入式操作系统（RTOS）基础**
   - **基本概念**：了解了为什么需要RTOS，特别是在处理多任务、复杂应用时。
   - **核心机制**：初步学习了**任务/线程**、**任务调度**（基于优先级）、**任务间通信**（信号量、消息队列、互斥锁）和**时间管理**（滴答定时器）等基本概念。

**6. 开发与调试工具**
   - **集成开发环境（IDE）**：熟练使用了如Keil MDK-ARM或STM32CubeIDE等工具进行工程管理、代码编写和编译。
   - **调试器**：掌握了使用ST-Link、J-Link等调试工具进行**在线调试（ICD）**，包括单步执行、设置断点、查看变量和寄存器值、分析外设状态等。

#### **二、 实践项目与总结**

通过理论学习，我配合完成了以下基础实验以巩固知识：
1.  **GPIO控制LED流水灯**：熟悉了工程创建、GPIO配置和基本的延时函数。
2.  **按键中断控制LED**：实践了EXTI和NVIC的配置，深入理解了中断处理流程。
3.  **UART打印调试信息**：学会了如何通过串口与PC通信，是重要的调试手段。
4.  **通过I2C/SPI读取传感器数据**（如温湿度传感器SHT30、加速度计MPU6050）：实践了总线协议的驱动编写和数据读取。

#### **三、 总结与展望**

通过本阶段的学习，我系统地构建了嵌入式开发的知识框架，从硬件原理到软件编程，从寄存器操作到库函数使用，具备了独立完成简单嵌入式应用开发的能力。

下一阶段，我将计划在以下方面进行深入学习：
1.  **深入RTOS**：选择一个主流RTOS（如FreeRTOS），深入学习其内核原理，并完成多任务设计的综合项目。
2.  **复杂外设驱动**：学习并实践ADC/DAC、看门狗、DMA（直接存储器访问）等更复杂外设的应用。
3.  **低功耗设计**：学习MCU的低功耗模式及其应用场景。
4.  **项目实战**：尝试完成一个综合性的小项目，整合多种外设和通信协议，如智能天气站、遥控小车等，以全面提升嵌入式系统设计能力。

---

