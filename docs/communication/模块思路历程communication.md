#PS2通讯模块
=========================
## 功能描述

  该模块用于实现PS2接收器与stm32主板之间的通讯功能。为了保证通讯的实时性，决定采用非阻塞式编程，即通过计时器中断来按时与手柄通信，以免出现卡在程序某处导致不能及时接收信息的情况。后续迭代升级的计划是采用spI硬件自动通信并且用DMA自动转存PS2数据到结构体中，既节约软件资源，又节约了宝贵的定时器资源。

## 开发历程

###  初期方案：
    初期受限于眼界和知识，就是准备采用用软件模拟SPI通信，在主程序中调用PS2通信函数更新PS2结构体，再根据PS2结构体数据调整外设。后来为规范程序设计，方便合作，规定每个外设对应的模块设计一个对接PS2的函数，每个外设通过该函数从ps2中获得需要的数据存入自己的结构体中，再调用根据自己结构体调整自己的外设的函数，奠定了主程序框架的基础。<br>
###  遇到的问题之一：

    首先是在写PS2通信函数的时候遭遇了问题。由于跟着江科大学的是标准库，群里的代码根本没法用，就开始着手写PS2通信程序。遇到的第一个问题是，由于以为SPI通讯外设都和江科大讲的一样，在最开始无论如何都无法实现通信，接收器也连不上。
###  解决方案：

    首先找客服搞清楚接收器闪烁代表什么。根据客服消息，确定了是程序没写对。之后找客服要数据手册，想办法搞明白了时序图的含义和一些表格的意思，明白了每个SPI外设虽然大体上通讯逻辑一样但一些细节，如从高位开始发送还是从低位开始发送，是不一样的，搞明白这个PS2手柄的通讯方式后成功解决了这个问题。<br>
###   遇到的问题之二：
    在主程序的while()循环中的某个固定的位置调用PS2通信函数，虽然暂时没什么问题，但是随着主程序中运行的代码越来越多，可能不能及时地接收手柄的信息，不利于小车迭代升级，也不能保证通信的实时性。<br>
###  解决方案：
    决定用定时器中断的方式，使用定时器，每过10ms就发起一次中断，进行与PS2的通信，这样保证了PS2通信的畅通，确保小车及时做出调整。<br>
###  下一步迭代优化方案：
    经过学习，提出了更好的方案，那就是采用spI硬件自动通信并且用DMA自动转存PS2数据到结构体中，既节约软件资源，又节约了宝贵的定时器资源，预计在二代机中实现。<br>

