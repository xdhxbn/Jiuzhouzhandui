#中期考核文档
=============
## PS2通信模块
=====
  功能描述：该模块用于实现PS2接收器与stm32主板之间的通讯功能。为了保证通讯的实时性，决定采用非阻塞式编程，即通过计时器中断来按时与手柄通信，以免出现卡在程序某处导致不能及时接收信息的情况。后续迭代升级的计划是采用spI硬件自动通信并且用DMA自动转存PS2数据到结构体中，既节约软件资源，又节约了宝贵的定时器资源。<br>

=====
  开发历程：<br>
    1.初期方案：<br>
    初期受限于眼界和知识，就是准备采用用软件模拟SPI通信，在主程序中调用PS2通信函数更新PS2结构体，再根据PS2结构体数据调整外设。
    后来为规范程序设计，方便合作，规定每个外设对应的模块设计一个对接PS2的函数，每个外设通过该函数从ps2中获得需要的数据存入自己的
    结构体中，再调用根据自己结构体调整自己的外设的函数，奠定了主程序框架的基础。<br>
    2.遇到的问题之一：<br>
    首先是在写PS2通信函数的时候遭遇了问题。由于跟着江科大学的是标准库，群里的代码根本没法用，就开始着手写PS2通信程序。遇到的第一个
    问题是，由于以为SPI通讯外设都和江科大讲的一样，在最开始无论如何都无法实现通信，接收器也连不上。<br>
    3.解决方案：<br>
    首先找客服搞清楚接收器闪烁代表什么。根据客服消息，确定了是程序没写对。之后找客服要数据手册，想办法搞明白了时序图的含义和一些表格
    的意思，明白了每个SPI外设虽然大体上通讯逻辑一样但一些细节，如从高位开始发送还是从低位开始发送，是不一样的，搞明白这个PS2手柄的通
    讯方式后成功解决了这个问题。<br>
    4.遇到的问题之二：<br>
    在主程序的while()循环中的某个固定的位置调用PS2通信函数，虽然暂时没什么问题，但是随着主程序中运行的代码越来越多，可能不能及时地接
    收手柄的信息，不利于小车迭代升级，也不能保证通信的实时性。<br>
    5.解决方案：<br>
    决定用定时器中断的方式，使用定时器，每过10ms就发起一次中断，进行与PS2的通信，这样保证了PS2通信的畅通，确保小车及时做出调整。
    6.下一步迭代优化方案：<br>
    经过学习，提出采用spI硬件自动通信并且用DMA自动转存PS2数据到结构体中，既节约软件资源，又极大的提升了传输速度，
    预计在二代机中实现。<br>

## 麦轮运动系统模块
=====
  功能描述：进行PS2与stm32单片机之间的通信。<br>
  
=====
  开发历程：

## 收集模块

<img width="864" height="496" alt="image" src="https://github.com/user-attachments/assets/6b6bb0c3-9933-4032-a8aa-aa344299bbec" />

=====
  功能描述：利用马达带动水车装置旋转，实现对小球的收集，利用斜坡作为导轨将被弹起的小球送到仓库。<br>
  
=====
  开发历程：<br>
  （1）设计思路：因为小车会有上下坡的动作，斜坡的存在会使小车整体被卡住，因此我们设计了伸缩结构的收集装置<br>
（2）迭代方案：就伸缩结构而言，第一代方案是利用齿轮齿条的传动作用将整个收集装置上下收缩移动，但是考虑到结构复杂以及容易卡住，第二代方案我们换成了利用两个舵机实现对收集装置的抬升，随后又还是觉得麻烦，所以我们的第三代收集装置是利用一个TT马达牵引两根线，直接对斜坡进行抬升。

  
## 转移装置模块

<img width="690" height="312" alt="image" src="https://github.com/user-attachments/assets/de4027d8-9181-45ca-93d5-ac78210e77c6" />
=====
  功能描述：MG995舵机固连仓库，舵机90°翻转实现仓库的倾倒功能；马达带动齿轮旋转，经齿条转化为平动实现仓库上升和下降的功能。<br>
    
=====
  开发历程：<br>
  第一代转移装置是直接利用舵机将仓库倾倒，问题在于此转移装置实现的前提（能够将2号小车里面的小球转移到1号小车）是仓库足够的高，考虑到仓库足够的高的话对收集装置的设计会比较困难，我们第二代转移装置设计了个升降结构，并且能够有效控制整车高度，实现一些特殊功能（比如从桥下经过、灵活性等等）
  
## 机械臂模块

<img width="864" height="496" alt="image" src="https://github.com/user-attachments/assets/f53b0147-44ac-42c4-bb3e-dcf3fb33fa2c" />

<img width="539" height="718" alt="image" src="https://github.com/user-attachments/assets/07f26611-21f8-4688-9a03-9434cc9cd3ce" />

=====
  功能描述：此机械臂拥有两大功能，一是实现对台阶上的小球的扒拉作用，二是实现对敌方小车的阻挡作用。<br>
    
=====
  开发历程：
  灵光闪现

## 主程序操作系统模块
===== 
  功能描述：进行PS2与stm32单片机之间的通信。<br>
    
=====
  开发历程：
